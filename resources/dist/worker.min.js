var _running=!1,_startTime=0,_time=0,_drift=0,_count=0,_interval=1e3,runTimer=function(){_running&&(_count++,_time+=_interval,_drift=(new Date).getTime()-_startTime-_time,postStateMessage(),setTimeout(runTimer,_interval-_drift))},start=function(){_running=!0,_startTime=(new Date).getTime(),postStateMessage(),setTimeout(runTimer,_interval)},stop=function(){_running=!1,_startTime=0,_time=0,_drift=0,_count=0},postStateMessage=function(){this.postMessage({time:_time,drift:_drift,count:_count,interval:_interval})};this.addEventListener("message",function(t){if("start"==t.data.command)start();else if("stop"==t.data.command)stop();else if("updateInterval"==t.data.command){var e=parseInt(t.data.interval);!isNaN(e)&&e>0&&(_interval=e)}},!1);